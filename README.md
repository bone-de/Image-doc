# 批量图片文字识别处理器

## 项目介绍
这是一个基于OpenAI gpt API的批量图片文字识别处理工具。该工具可以高效地处理大量图片，提取其中的文字内容，并将结果保存到文本文件中。项目特点包括高并发处理、实时进度显示、错误处理和详细的日志记录。

## 特性
- 🚀 异步并发处理，大幅提升处理速度
- 📊 实时显示处理进度
- 🔄 自动图片优化，提高处理效率
- 📝 详细的日志记录
- ⏱️ 处理时间统计
- 🛠️ 错误处理和异常捕获
- 💾 结果自动保存

## 环境要求
- Python 3.7+
- 必要的Python包：
  ```
  openai
  pillow
  tqdm
  aiohttp
  ```

## 使用方法
1. 将需要处理的图片放入 `images` 文件夹

2. 运行脚本：
   ```bash
   python main.py
   ```

3. 查看结果：
   - 处理结果保存在 `results.txt`
   - 处理日志保存在 `processing.log`

## 输出文件说明
### results.txt
包含每张图片的处理结果，格式如下：
```
处理开始时间: YYYY-MM-DD HH:MM:SS
=====================================
文件名: image1.jpg
处理结果: [识别出的文字内容]
时间: YYYY-MM-DD HH:MM:SS
=====================================
...
总处理时间: XX.XX秒
处理的图片数量: XX
平均每张图片处理时间: XX.XX秒
```

### processing.log
记录程序运行的详细日志，包括：
- 程序启动和完成信息
- 错误和异常信息
- 处理进度和状态

## 性能优化
可以通过调整以下参数来优化性能：
1. 并发数量（max_workers）：
   ```python
   max_workers=20  # 适当调整并发数
   ```

2. 图片优化参数：
   ```python
   max_size=800    # 最大图片尺寸
   quality=85      # JPEG压缩质量
   ```

## 注意事项
1. 确保网络连接稳定
2. 监控系统资源使用情况
3. 大量图片处理时，建议先小批量测试
4. 定期备份处理结果

## 错误处理
- 程序会自动跳过处理失败的图片
- 所有错误都会记录在日志文件中
- 可以根据日志排查具体问题

## 常见问题
1. Q: 如何提高处理速度？
   A: 可以增加max_workers值，或优化图片预处理参数

2. Q: 支持哪些图片格式？
   A: 支持PNG, JPG, JPEG, GIF格式

3. Q: 如何处理超大图片？
   A: 程序会自动调整图片大小，也可以修改max_size参数
